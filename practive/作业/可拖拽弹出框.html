<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8"/>
		<title></title>
	</head>
	<style>
		html,body{
			width: 100%;
			height: 100%;
			padding: 0px;
			margin: 0px;
		}
		.cover{
			position: fixed;
			width:100%;
			height: 100%;
			background: #B6BBC0;
			
			padding: 0px;
			margin: 0px;
		}
		.layer{
			text-align:center;
			position: absolute;
			left: 0; top: 0;
			margin: auto;	
			width:500px;
			height: 300px;
			background: cornflowerblue;
		}
		.title{
			text-align:center;
			height: 30px;
			background: #006666;
			cursor: move;
		}
		.closeBtn{
			position: absolute;
			bottom: 5px;
		}
	</style>
	<body>
		<div class="cover">
			<div class="layer">
				<div class="title">窗口标题</div>
				<button class="closeBtn">关闭</button>
			</div>			
		</div>
		<script type="text/javascript">
			var $title = document.querySelector('.title');
			var $layer = document.querySelector('.layer');
			$title.onmousedown = function(ev) {
				ev = ev || window.event;
//				计算相对位置
//				$title.offsetLeft //offsetLeft 相对于父级窗体的位置
				var offsetX = ev.offsetX;
				var offsetY = ev.offsetY
				document.onmousemove = function(ev) {
					ev= ev || window.event;
					$layer.style.left = ev.clientX - offsetX + 'px';
					$layer.style.top = ev.clientY - offsetY+ 'px';
					
				}
			}
			// 写在document上面，若是拖拽有范围，鼠标是可能移开title的
			document.onmouseup = function() {
				document.onmousemove = null;
			}
		</script>
	</body>
</html>
